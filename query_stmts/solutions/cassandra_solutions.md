# Cassandra Query Statements

> [!NOTE]
> These query statements were generated by [phind](https://www.phind.com/) to explore different aspects of Cassandra, including node setup, data replication, CQL operations, and partitioning.

## Basic CRUD Operations

1. Insert Data

```sql
INSERT INTO purchase_data (event_time, order_id, product_id, category_id, category_code, brand, price, user_id) VALUES ('2024-01-01', 1001, 2001, 3001, 'A', 'BrandX', 99.99, 'user123');
```

2. Select All Data

```sql
SELECT * FROM purchase_data;
```

3. Select Specific Columns

```sql
SELECT event_time, order_id, price FROM purchase_data;
```

4. Update Price

```sql
UPDATE purchase_data SET price = 89.99 WHERE order_id = 1001;
```

5. Delete Record

```sql
DELETE FROM purchase_data WHERE order_id = 1001;
```

## Partitioning and Clustering Keys

6. Query by Category ID

```sql
SELECT * FROM purchase_data WHERE category_id = 3001;
```

7. Range Query by Event Time

```sql
SELECT * FROM purchase_data WHERE event_time >= '2024-01-01' AND event_time < '2024-02-01';
```

8. Order by Product ID

```sql
SELECT * FROM purchase_data ORDER BY product_id ASC;
```

9. Limit Results

```sql
SELECT * FROM purchase_data LIMIT 10;
```

10. Skip Results

```sql
SELECT * FROM purchase_data SKIP 10 LIMIT 20;
```

## Batch Operations

11. Batch Insert

```sql
BEGIN BATCH
  INSERT INTO purchase_data (event_time, order_id, product_id, category_id, category_code, brand, price, user_id) VALUES ('2024-01-02', 1002, 2002, 3002, 'B', 'BrandY', 79.99, 'user456');
  INSERT INTO purchase_data (event_time, order_id, product_id, category_id, category_code, brand, price, user_id) VALUES ('2024-01-03', 1003, 2003, 3003, 'C', 'BrandZ', 59.99, 'user789');
COMMIT;
```

12. Batch Delete

```sql
BEGIN BATCH
  DELETE FROM purchase_data WHERE order_id = 1002;
  DELETE FROM purchase_data WHERE order_id = 1003;
COMMIT;
```

## Secondary Indexes and Materialized Views

13. Create Index on Brand

```sql
CREATE INDEX ON purchase_data (brand);
```

14. Query Using Index

```sql
SELECT * FROM purchase_data WHERE brand = 'BrandY';
```

15. Drop Index

```sql
DROP INDEX ON purchase_data (brand);
```

16. Create Materialized View

```sql
CREATE MATERIALIZED VIEW purchase_data_summary AS
SELECT category_id, AVG(price) AS average_price
FROM purchase_data
WHERE price IS NOT NULL
GROUP BY category_id;
```

17. Query Materialized View

```sql
SELECT * FROM purchase_data_summary WHERE category_id = 3001;
```

18. Drop Materialized View

```sql
DROP MATERIALIZED VIEW purchase_data_summary;
```

## High Availability and Scalability

19. Set Replication Factor

```sql
ALTER TABLE purchase_data WITH REPLICATION = { 'class': 'SimpleStrategy', 'replication_factor': 3 };
```

20. Add Node to Cluster

```sql
ADD KEYSPACE mykeyspace WITH replication = {'class':'NetworkTopologyStrategy', 'datacenter1':3};
```

21. Distribute Data After Adding Node

```sql
INSERT INTO mykeyspace.purchase_data (event_time, order_id, product_id, category_id, category_code, brand, price, user_id) VALUES ('2024-01-04', 1004, 2004, 3004, 'D', 'BrandW', 49.99, 'user101112');
```

22. Check Data Distribution

```sql
SELECT * FROM mykeyspace.purchase_data WHERE category_id = 3004;
```

23. Monitor System Metrics

```sql
SELECT * FROM system.local WHERE keyspace_name = 'mykeyspace';
```

24. List Tables

```sql
DESCRIBE TABLES mykeyspace;
```

25. Describe Table

```sql
DESCRIBE TABLE mykeyspace.purchase_data;
```

26. Compact Table

```sql
TRUNCATE mykeyspace.purchase_data;
```

27. Repair Table

```sql
REPAIR TABLE mykeyspace.purchase_data;
```

28. Backup Table

```sql
BACKUP mykeyspace.purchase_data TO '/path/to/backup/directory';
```

29. Restore Table

```sql
RESTORE mykeyspace.purchase_data FROM '/path/to/backup/directory';
```

30. Drop Table

```sql
DROP TABLE mykeyspace.purchase_data;
```

31. Create Table

```sql
CREATE TABLE mykeyspace.new_purchase_data (
    event_time timestamp,
    order_id int,
    product_id int,
    category_id int,
    category_code text,
    brand text,
    price decimal,
    user_id text,
    PRIMARY KEY (order_id)
);
```

32. Alter Table

```sql
ALTER TABLE mykeyspace.new_purchase_data ADD COLUMN description text;
```

33. Rename Table

```sql
ALTER TABLE mykeyspace.new_purchase_data RENAME TO renamed_purchase_data;
```

34. Drop Column

```sql
ALTER TABLE mykeyspace.renamed_purchase_data DROP COLUMN description;
```

35. Modify Primary Key

```sql
ALTER TABLE mykeyspace.renamed_purchase_data DROP PRIMARY KEY;
ALTER TABLE mykeyspace.renamed_purchase_data ADD PRIMARY KEY (order_id, product_id);
```

36. Create Composite Primary Key

```sql
ALTER TABLE mykeyspace.renamed_purchase_data ADD PRIMARY KEY ((order_id), product_id);
```

37. Create Super Column Family

```sql
CREATE SUPERCOLUMN family_name IN KEYSPACE_NAME column_family_name;
```

38. Insert into Super Column

```sql
INSERT INTO KEYSPACE_NAME.super_column_name (column_name) VALUES ('value');
```

39. Query Super Column

```sql
SELECT * FROM KEYSPACE_NAME.super_column_name;
```

40. Delete Super Column

```sql
DELETE FROM KEYSPACE_NAME.super_column_name WHERE column_name = 'value';
```

41. Drop Super Column

```sql
DROP SUPERCOLUMN KEYSPACE_NAME.super_column_name.column_name;
```

42. Create User Defined Type

```sql
CREATE TYPE mykeyspace.product_info AS (id int, name text);
```

43. Insert UDT

```sql
INSERT INTO mykeyspace.my_table (info) VALUES ({id: 1, name: 'Product1'});
```

44. Query UDT

```sql
SELECT info.id, info.name FROM mykeyspace.my_table;
```

45. Update UDT

```sql
UPDATE mykeyspace.my_table SET info = {id: 2, name: 'Product2'} WHERE id = 1;
```

46. Delete UDT

```sql
DELETE FROM mykeyspace.my_table WHERE id = 1;
```

47. Drop UDT

```sql
DROP TYPE mykeyspace.product_info;
```

48. Create Collection

```sql
CREATE COLLECTION mykeyspace.collection_name;
```

49. Insert into Collection

```sql
INSERT INTO mykeyspace.collection_name (field_name) VALUES ('value');
```

50. Query Collection

```sql
SELECT * FROM mykeyspace.collection_name;
```
